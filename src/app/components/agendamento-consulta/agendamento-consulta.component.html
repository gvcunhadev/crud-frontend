<div class="container">
  <h1>Agendar Consulta</h1>

  <form (ngSubmit)="submitForm()" class="form-layout">
    <div class="form-column">
      <div class="form-group">
        <label for="motivo">Motivo da Consulta:</label>
        <textarea id="motivo" [(ngModel)]="agendamento.motivo" name="motivo" placeholder="Descreva o motivo da consulta" rows="4"></textarea>
      </div>
      <div class="form-group">
        <label for="profissional">Profissional:</label>
        <input type="text" id="profissional" [(ngModel)]="agendamento.profissional" name="profissional" placeholder="Digite o nome" required>
      </div>
      <div class="form-group">
        <label for="especialidade">Especialidade:</label>
        <select id="especialidade" [(ngModel)]="agendamento.especialidade" name="especialidade" required>
          <option value="">Selecione a especialidade</option>
          <option value="CARDIOLOGIA">Cardiologia</option>
          <option value="DERMATOLOGIA">Dermatologia</option>
          <option value="ORTOPEDIA">Ortopedia</option>
          <option value="PEDIATRIA">Pediatria</option>
        </select>
      </div>
      <div class="form-group">
        <label for="endereco">Endereço:</label>
        <input type="text" id="endereco" [(ngModel)]="agendamento.endereco" name="endereco" placeholder="Ex: Clínica Sonhare Rua das..." required>
      </div>
    </div>

    <div class="form-column">
      <div class="form-group">
        <label for="data">Data:</label>
        <div class="input-with-icon">
          <input type="date" id="data" [(ngModel)]="agendamento.data" name="data" required>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="calendar-icon"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
        </div>
      </div>
      <div class="form-group">
        <label for="hora">Hora:</label>
        <div class="input-with-icon">
          <input type="time" id="hora" [(ngModel)]="agendamento.hora" name="hora" required>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="clock-icon"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
        </div>
      </div>
      <div class="calendar-card">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="calendar-icon-large"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
        <span>Visualização do Calendário</span>
      </div>
      <div class="sync-agenda">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sync-icon"><path d="M21.5 2a.5.5 0 0 0-.497.5l-1.95 5.85a.5.5 0 0 0 .867.5l1.09-1.308a1.5 1.5 0 1 1 2.22 1.34L20.5 11h-1.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1.5l1.09 1.308a1.5 1.5 0 1 1-2.22 1.34l-1.09-1.308a.5.5 0 0 0-.867.5l1.95 5.85a.5.5 0 0 0 .497.5H23.5a.5.5 0 0 0 .5-.5V2.5a.5.5 0 0 0-.5-.5H21.5zm-1.5 6a.5.5 0 0 0 .5.5H22v1h-1.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1.5v1h-1.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1.5a.5.5 0 0 0 .5-.5V14a.5.5 0 0 0-.5-.5H22v-1h1.5a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1.5V10h1.5a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5H22v-1h-1.5a.5.5 0 0 0-.5-.5V6.5a.5.5 0 0 0 .5.5h1.5a.5.5 0 0 0 .5-.5V4.5a.5.5 0 0 0-.5-.5H22v1H20.5a.5.5 0 0 0-.5.5v1z" fill="#000000"/><path d="M11 1.5c-3.15 0-5.7 2.55-5.7 5.7s2.55 5.7 5.7 5.7a5.7 5.7 0 0 0 4.1-1.7l1.4 1.4c-.9 1.1-2.2 1.8-3.5 2.1l-.8 1.9c-.2.5-.7.7-1.2.7h-1.8c-.5 0-1-.2-1.2-.7L2.4 11.5c-.5-.5-.7-1-.7-1.5V8c0-1.2.5-2.4 1.4-3.3L1.5 3.5c-1.2 1.2-1.9 2.9-1.9 4.7v1.8c0 1.2.5 2.4 1.4 3.3l3.8 3.8a5.7 5.7 0 0 0 4.1 1.7 5.7 5.7 0 0 0 5.7-5.7c0-3.15-2.55-5.7-5.7-5.7zM11 1.5c-3.15 0-5.7 2.55-5.7 5.7s2.55 5.7 5.7 5.7a5.7 5.7 0 0 0 4.1-1.7l1.4 1.4c-.9 1.1-2.2 1.8-3.5 2.1l-.8 1.9c-.2.5-.7.7-1.2.7h-1.8c-.5 0-1-.2-1.2-.7L2.4 11.5c-.5-.5-.7-1-.7-1.5V8c0-1.2.5-2.4 1.4-3.3L1.5 3.5c-1.2 1.2-1.9 2.9-1.9 4.7v1.8c0 1.2.5 2.4 1.4 3.3l3.8 3.8a5.7 5.7 0 0 0 4.1 1.7 5.7 5.7 0 0 0 5.7-5.7c0-3.15-2.55-5.7-5.7-5.7z" fill="gray"/></svg>
        <span>Sincronizar com Google Agenda</span>
      </div>
      <div class="form-actions">
        <button type="submit" class="submit-button">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="checkmark-icon"><polyline points="20 6 9 17 4 12"></polyline></svg>
          Agendar Consulta
        </button>
      </div>
    </div>
  </form>

  <h2 *ngIf="agendamentos.length > 0">Agendamentos Existentes</h2>
  <table id="agendamentos-table" *ngIf="agendamentos.length > 0">
    <thead>
      <tr>
        <th>ID</th>
        <th>Motivo</th>
        <th>Profissional</th>
        <th>Especialidade</th>
        <th>Data</th>
        <th>Hora</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let ag of agendamentos">
        <td>{{ ag.id }}</td>
        <td>{{ ag.motivo }}</td>
        <td>{{ ag.profissional }}</td>
        <td>{{ ag.especialidade }}</td>
        <td>{{ ag.data }}</td>
        <td>{{ ag.hora }}</td>
        <td class="actions-buttons">
          <button class="edit" (click)="editAgendamento(ag)">Editar</button>
          <button class="delete" (click)="deleteAgendamento(ag.id!)">Excluir</button>
        </td>
      </tr>
    </tbody>
  </table>
  <p *ngIf="agendamentos.length === 0">Nenhum agendamento encontrado.</p>
</div>